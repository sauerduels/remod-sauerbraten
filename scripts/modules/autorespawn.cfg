respawn_millis = 300

auto_respawn = [
	if (&& (> $respawn_millis 0) (! (isspectator $arg1))) [
		player_cn = $arg1
		last_player_deaths = (getdeaths $player_cn)
		sleep $respawn_millis [
			if (= @last_player_deaths (getdeaths @player_cn)) [
				spawnplayer @player_cn
			]
		]
	]
]

addhandler ondeath auto_respawn
addhandler onsuicide auto_respawn

auto_respawn_spectator = [
	if (&& (> $respawn_millis 0) (= $arg2 0)) [
		sleep $respawn_millis [ spawnplayer $arg1 ]
	]
]

addhandler onspectator auto_respawn_spectator
