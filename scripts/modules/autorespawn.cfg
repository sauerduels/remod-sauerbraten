respawn_millis = 300

auto_respawn = [
	if (&& (> $respawn_millis 0) (! (isspectator $arg1))) [
		last_player_deaths = (getdeaths $arg1)
		sleep $respawn_millis [
			if (= @last_player_deaths (getdeaths $arg1)) [
				spawnplayer $arg1
			]
		]
	]
]

addhandler ondeath auto_respawn
addhandler onsuicide auto_respawn

auto_respawn_spectator = [
	if (&& (> $respawn_millis 0) (= $arg2 0)) [
		sleep $respawn_millis [ spawnplayer $arg1 ]
	]
]

addhandler onspectator auto_respawn_spectator
