// select 3 random maps from mappool

effic_mps = [aard3c academy duel8 frozen legazzo memento ot simplicity turbine]
ffa_mps = [corruption hades metl2 metl3 metl4 nmp8 paradigm skrdm1 tumwalk]
insta_mps = [aard3c academy complex duel7 duel8 douze kffa ot turbine]

cmd_rndmap = [
    say ""
    map_pool_list = $[@[arg2]_mps]
    map_pool_len = (listlen $map_pool_list)
    num_map_choices = 5
    
    // pick a random number between 0 and num_map_choices, and "bubble"
    // this number up until we reach an index which is unoccupied
    
    loop i $num_map_choices [
        (concatword rnd_map_ $i) = (rnd $map_pool_len $i)
        loop j $i [
            loop k $i [
                if (= $(concatword rnd_map_ $i) $(concatword rnd_map_ $k)) [
                    (concatword rnd_map_ $i) = (mod (+ $(concatword rnd_map_ $i) 1) $map_pool_len)
                ]
            ]
        ]
    ]
    
    say (format "^f3The random map choices are:^f7") (loopconcat i $num_map_choices [ result (at $map_pool_list $(concatword rnd_map_ $i)) ])
]

registercommand "rndmap" cmd_rndmap 3 "s" "rndmap [mode] ^f1Randomly select 3 maps from the map pool"

